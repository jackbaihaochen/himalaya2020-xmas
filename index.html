<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- css -->
    <link rel="stylesheet" href="./assets/css/fullpage.css" />
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="./assets/css/f1cd4.css" />
    <link rel="stylesheet" href="./assets/css/default.css" />
    <!-- js -->
    <script src="./assets/js/fullpage.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>
    <title>himalayaサンタのX'mas</title>
  </head>
  <body>
    <!-- navi bar -->
    <nav class="navbar navbar-expand-lg navbar-light" id="navi">
      <a class="navbar-brand" href="https://www.himalaya.com/jp" target="_blank"
        ><i class="cat-icon cat-icon-Himalaya logo _uPU"></i
      ></a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a
              class="nav-link"
              href="javascript:void(0);"
              onclick="rollingBackToTop(1);"
              >トップ <span class="sr-only">(current)</span></a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              href="javascript:void(0);"
              onclick="rollingBackToTop(2);"
              >感謝の気持ち</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              href="javascript:void(0);"
              onclick="rollingBackToTop(3);"
              >受賞者</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              href="javascript:void(0);"
              onclick="rollingBackToTop(4);"
              >プレゼント</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              href="javascript:void(0);"
              onclick="rollingBackToTop(5);"
              >全部のキャスターたち</a
            >
          </li>
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="navbarDropdownMenuLink"
              role="button"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              Dropdown link
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <a class="dropdown-item" href="#">Something else here</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>

    <div id="fullpage">
      <!-- section-1 header-->
      <div class="section" data-anchor="page1" id="p1-background">
        <!-- <div id="p1-bg-img1-cover"></div>
        <div class="container-fluid">
          <div class="row mb-5">
            <h1 class="col-12 font-weight-bolder text-light">
              himalayaからの、贈りもの。
            </h1>
          </div>
          <div class="row text-light">
            <h3 class="col-12 pb-3">2020</h3>
            <h3 class="col-12 pb-3">年末感謝祭</h3>
            <h3 class="col-12 pb-3">himalayaサンタのクリスマス</h3>
          </div>
        </div> -->
      </div>
      <!-- section-2 welcome-->
      <div class="section" data-anchor="page2">
        <div class="container" id="p2-text-background">
          <div class="row justify-content-center text-center" id="p2-text">
            <p class="col-12 pb-1">
              himalayaキャスターのみなさん、今日も音声配信おつかされまです。
            </p>
            <p class="col-12 pb-1">
              新型コロナウイルスで世界が一変した2020年もまもなく終わります。
              今年は、himalaya含め音声配信の分野にとっては、
              まさに“大ブレイク前夜”的な1年となりました。
            </p>
            <p class="col-12 pb-1">
              その支えとなったのが、キャスターのみなさんの存在です。
            </p>
            <p class="col-12 pb-1">
              そこで、みなさんの1年間の活動に敬意を表し、
              「今年himalayaに爪痕を残した50名のキャスター」を
              勝手に選出して勝手に感謝の気持ちをお伝えすることにしました。
            </p>
            <p class="col-12" style="margin-bottom: 0">
              あらためて、1年間ありがとうございました。
            </p>
            <p class="col-12">
              2021年も、himalayaをどうぞよろしくお願いいたします。
            </p>
          </div>
        </div>
      </div>
      <!-- section-3 casters-->
      <div class="section" data-anchor="page3" id="p3-cover">
        <div class="container">
          <img src="./assets/img/11.png" alt="p3-header" id="p3-header" />
        </div>
        <div class="container" id="caster-list">
          <p class="department-title">部門A</p>
          <div class="row">
            <div class="col-6">
              <div class="caster-header">
                <a
                  href="https://www.himalaya.com/jp-ghost-storyline-rakugo-podcasts/2020-2521720"
                  ><img
                    src="https://cdn.himalaya.com/0d99eaa3250846f3b8a1d96babc46b94.jpg?x-oss-process=image/resize,w_600,h_600&auth_key=4102416000-1234-0-6f727af1626c797a826c7da736ed6a40"
                    alt="test"
                    class="caster-img"
                /></a>
              </div>
              <div class="caster-name">
                <label for="test"><span>キャスター名</span></label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- section-4 presents-->
      <div class="section" data-anchor="page4">
        <div class="container">
          <img src="./assets/img/10.png" alt="p4-header" id="p4-header" />
        </div>
        <div class="container" id="p4-text-background">
          <div class="row justify-content-center" id="p4-text">
            <p class="col-12 pb-1">
              当ページでご紹介した50名に、特別なプレゼントを贈呈します。のちほど、個別にお送りするスペシャル感謝メールに記載の専用応募フォームから、ご申請ください。
            </p>
            <p class="col-12 pb-1">
              プレゼントは、Aグループから1つ、Bグループから1つ、計2つお選びいただけます。
            </p>
          </div>
          <div class="row" id="p4-cover">
            <div class="col" id="p4-group-a">
              <p>Group A</p>
              <br />
              <ul>
                <li>すき焼き用A5ランク黒毛和牛</li>
                <li>ズワイガニむき身セット</li>
                <li>天然松茸セット</li>
                <li>高級フルーツ詰め合わせ</li>
              </ul>
            </div>
            <div class="col" id="p4-group-b">
              <p>Group B</p>
              <br />
              <ul>
                <li>ビール24缶セット</li>
                <li>日本酒飲み比べセット</li>
                <li>100%フルーツジュース詰め合わせ</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- section-5 all other ugcs-->
      <div class="section" data-anchor="page5" id="page5_all_ugc">
        <div class="container">
          <img src="./assets/img/9.png" alt="p5-header" id="p5-header" />
        </div>
        <div class="container" id="all_ugc_container">
          <div class="container" id="all_ugc"></div>
        </div>
      </div>
      <!-- section-9 -->
      <div class="section fp-auto-height" data-anchor="page9">
        <footer id="footer">
          <div class="container">
            <div class="row">
              <div class="col-6 col-md-4 copy-rights">
                2020 © Copyrights himalaya.Inc.
              </div>
              <div class="col-6 col-md-4">
                <a href="https://jp.himalaya.com/company/">会社概要</a>
              </div>
              <div class="col-6 col-md-4">
                <a href="https://twitter.com/himalaya_jp"
                  ><img src="./assets/img/twitter_hover_pc.png" alt="twitter"
                /></a>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>

    <script>
      //滑屏效果
      new fullpage("#fullpage", {
        // menu
        anchors: ["page1", "page2", "page3", "page4", "page5", "page6"],
        autoScrolling: true,
        scrollBar: true,
        verticalCentered: true,
        paddingTop: "56px",

        // stop auto scroll when encountering long pages
        afterLoad: function (origin, destination, direction) {
          var loadedSection = this;

          //stops when entering page3 from page2
          if (origin.anchor == "page1" && direction == "down") {
            fullpage_api.setAutoScrolling(false);
            fullpage_api.destroy();
          }
        },
      });
    </script>

    <script>
      function rollingBackToTop(page_num) {
        $("html,body").animate(
          { scrollTop: $(`[data-anchor='page${page_num}']`).offset().top },
          "slow"
        );
        $("[class='nav-item active']").attr("class", "nav-item");
        $(`[onclick='rollingBackToTop(${page_num});']`)
          .parent()
          .attr("class", "nav-item active");
      }

      // 这部分直接原生Html写就行；回头把代码复制过去也可以
      async function autoCreateAwardList(parent_element) {
        var promise = await fetch("./assets/data/xmas-selected-ugc-test.csv");
        var data = await promise.text();
        var result = data.trim();
        var arr = result.split("\n").slice(1);
        var str = ``;
        var department_title = "";
        for (let i = 0; i < arr.length; i++) {
          var caster_info = arr[i].split(",");
          var temp_department_title = caster_info[0];
          if (temp_department_title != department_title) {
            if (department_title == "") {
              department_title = temp_department_title;
              str =
                str +
                `<p class="department-title">${department_title}</p><div class="row">`;
            } else {
              department_title = temp_department_title;
              str =
                str +
                `</div><p class="department-title">${department_title}</p><div class="row">`;
            }
          }
          var aid = caster_info[1];
          var title = caster_info[2];
          var pic_url =
            caster_info[5].slice(1) +
            "," +
            caster_info[6] +
            "," +
            caster_info[7];
          str =
            str +
            `
                <div class="col-6">
                  <div class="caster-header">
                    <a
                      href="https://www.himalaya.com/jp-ghost-storyline-rakugo-podcasts/${aid}"
                      ><img
                        src="${pic_url}"
                        alt="test"
                        class="caster-img"
                    /></a>
                  </div>
                  <div class="caster-name">
                    <label for="test"><span>${title}</span></label>
                  </div>
                </div>
              `;
        }
        str = str + "</div>";
        parent_element.innerHTML = str;
      }

      async function rollingUGCDisplay(parent_element) {
        var promise = await fetch(
          "./assets/data/himalaya-all-ugc-list-test.csv"
        );
        var data = await promise.text();
        var result = data.trim();
        var arr = result.split("\n").slice(1);
        var str = `<ul id="con1">`;
        for (let i = 0; i < arr.length; i++) {
          var ugc_info = arr[i].split(",");
          var title = ugc_info[1];
          var aid = ugc_info[0];
          str =
            str +
            `<li><a href="https://www.himalaya.com/jp-ghost-storyline-rakugo-podcasts/${aid}">${title}</a></li>`;
        }
        str = str + `</ul>`;
        parent_element.innerHTML = str;
        function scrollUp() {
          if (
            parent_element.scrollTop >=
            document.getElementById("con1").offsetHeight
          ) {
            parent_element.scrollTop = 0;
          } else {
            parent_element.scrollTop++;
          }
        }
        var time = 50;
        var mytimer = setInterval(scrollUp, time);
        parent_element.onmouseenter = function () {
          clearInterval(mytimer);
        };
        parent_element.onmouseleave = function () {
          clearInterval(mytimer);
          mytimer = setInterval(scrollUp, time);
        };
      }

      window.onload = async function () {
        var accordion = document.getElementById("accordionExample");
        var pages = document.getElementsByClassName("section");
        var caster_list = document.getElementById("caster-list");
        var page5 = document.getElementById("page5_all_ugc");
        var all_ugc = document.getElementById("all_ugc");
        autoCreateAwardList(caster_list);
        rollingUGCDisplay(all_ugc);
        setTimeout(setHeight(), 1000);
        function setHeight() {
          var responsive_height =
            (parseInt(page5.style.height.slice(0, -2)) - 300).toString() + "px";
          console.log(responsive_height);
          all_ugc.style.height = responsive_height;
        }
      };
    </script>
  </body>
</html>
